<div class="item">
    <label for="image_recipe">Imagem da imagem</label>
    <div>
      <input
        type="text" 
        name="image_recipe" 
        value="{{ recipe.image }}"
      >
    </div>
  </div>

<div class="item">
  <label for="chef">Chef</label>
  <div>
    <select name="chef" id="">
      <option value="" disabled selected>Selecione um chef</option>
      {% for chef in chefsOptions %}
        <option value="{{ chef.id }}" {% if recipe.chef_id == chef.id %} selected {% endif %}>
          {{ chef.name}}
        </option>
      {% endfor %}
    </select>
  </div>
</div>

<div class="item">
  <label for="title_recipe">Nome da receita</label>
  <div>
    <input 
      type="text" 
      name="title_recipe" 
      value="{{ recipe.title }}"
    >
    </div>
</div>

<div class="item">
  <label for="ingredients">Ingredientes</label>
  <div id="ingredients">
    {% for ingredient in recipe.ingredients %}
      <div class="ingredient">
          <input 
            type="text" 
            name="ingredients[]" 
            value="{{ ingredient }}" 
          />
      </div>
    {% endfor %}
  </div>
  <button type="button" class="add-ingredient">Adicionar novo ingrediente</button>
</div>

<div class="item">
  <label for="preparations">Modo de preparo</label>
  <div id="preparations">
    {% for preparation in recipe.preparation %}
      <div class="preparation">
          <input 
            type="text" 
            name="preparations[]" 
            value="{{ preparation }}" 
          />
      </div>
    {% endfor %}
  </div>
  <button type="button" class="add-preparation">Adicionar novo preparo</button>
</div>


<div class="item">
  <label for="informationAdditional">Informações adicionais</label>
  <div>
    <textarea 
      name="informationAdditional" 
      cols="30" 
      rows="10">{{ recipe.information }}
    </textarea>
  </div>
</div>

<script>

      function addIngredient() {
      const ingredients = document.querySelector("#ingredients");
      const fieldContainer = document.querySelectorAll(".ingredient");
    
      // Realiza um clone do último ingrediente adicionado
      const newField = fieldContainer[fieldContainer.length - 1].cloneNode(true);
    
      // Não adiciona um novo input se o último tem um valor vazio
      if (newField.children[0].value == "") return false;
    
      // Deixa o valor do input vazio
      newField.children[0].value = "";
      ingredients.appendChild(newField);
    }
    document
      .querySelector(".add-ingredient")
      .addEventListener("click", addIngredient);




      function addPreparations() {
      const preparations = document.querySelector("#preparations");
      const fieldContainer = document.querySelectorAll(".preparation");
    
      // Realiza um clone do último ingrediente adicionado
      const newField = fieldContainer[fieldContainer.length - 1].cloneNode(true);
    
      // Não adiciona um novo input se o último tem um valor vazio
      if (newField.children[0].value == "") return false;
    
      // Deixa o valor do input vazio
      newField.children[0].value = "";
      preparations.appendChild(newField);
    }
    
    document
      .querySelector(".add-preparation")
      .addEventListener("click", addPreparations);
  </script>